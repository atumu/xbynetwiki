title: linux之vim 

#  linux之vim 
模式
Vim最令人混淆的特征之一是她拥有3种模式.
插入模式:输入文本
编辑模式:执行命令，也称为正常模式。
命令模式:执行 冒号 命令
插入模式并不是缺省的模式，您必须按下i来进入插入模式，在屏幕上输入一些文字。按下<Esc>按钮将从插入模式转到编辑模式。该模式用于移动和操纵文本，有时以非常有趣的方式进行。 命令模式用于执行冒号命令，比如保存，查找/替换以及配置vim等。欲保存文本，您只需要在正常模式下输入:进入命令模式并输入:w filename<Enter>.退出vim请执行冒号命令:q.总结如下：
![](/data/dokuwiki/linux/pasted/20150628-191127.png)

vimrc配置方案:
```


[root@www ~]# vim ~/.vimrc
"这个档案的双引号 (") 是批注
set hlsearch            "高亮度反白
set backspace=2         "可随时用退格键删除
set autoindent          "自动缩排
set ruler               "可显示最后一行的状态
set showmode            "左下角那一行的状态
set nu                  "可以在每一行的最前面显示行号啦！
set bg=dark             "显示不同的底色色调
syntax on               "进行语法检验，颜色显示。

```
![](/data/dokuwiki/linux/pasted/20150628-191028.png)
![](/data/dokuwiki/linux/pasted/20150628-190700.png)
![](/data/dokuwiki/linux/pasted/20150628-190724.png)
![](/data/dokuwiki/linux/pasted/20150628-190741.png)
![](/data/dokuwiki/linux/pasted/20150628-190755.png)
![](/data/dokuwiki/linux/pasted/20150628-190811.png)
![](/data/dokuwiki/linux/pasted/20150628-190828.png)
![](/data/dokuwiki/linux/pasted/20150628-190844.png)
![](/data/dokuwiki/linux/pasted/20150628-190904.png)
![](/data/dokuwiki/linux/pasted/20150628-190922.png)

要插入文本，将光标定位至插入位置（在光标之前），然后按i进入插入模式。如果用大写（I）的命令就会在行首插入内容，a在光标位置后，A在行尾。
在Vim中，以h左移光标，j键向下移动光标，k上移光标，l右移光标：而^移动光标至行首，$则移至行尾。
(将光标移至当前句子的句首，)至句末。如果需要移动更远的距离，{可移至段首，}至段尾。 H将光标移至当前屏幕上显示的第一行，M至屏幕中央，L则是至屏幕上的最后一行。gg将光标移至文件的开始，G至文件结尾。Ctrl+D，或 <C-d>可以一屏一屏地翻页。
重复命令
如果一个命令前缀了数字 n，那么这个命令就会执行 n 次（有些命令的行为可能有所不同，例如s）。例如，按下3i，输入「Help! 」，然后按下Esc，会输入「Help! Help! Help! 」。2}将光标后移两个自然段。对下面将要讲到的命令，该技巧十分常用。
删除
x命令删除光标所在处的字符，X删除光标前的字符。使用上面的技巧，6x会删除6个字符。用.（半角句号）可以重复前一个命令。所以，假如你有多个「foobar」，但决定将其修改为「foo」，那么，将光标移动至「b」处，键入3x，移动至下一个单词的「b」处，按下.即可。
d代表你将要删除一些内容，在按下d之后，你需要继续指定需要删除的内容。这时你可以搭配移动光标的命令。dW可以删除至下一个单词，d^可以删至行首。删除命令也可以前缀数字，如3dW可以删除光标之后的三个单词。大写的D可以删除至行尾（等同于d$），dd可以删除整行。
cw可以删除并替换当前单词，这个命令将删除单词并进入插入模式。r可以替换单个字符。
撤销与恢复
Vim内置了剪贴板（也叫缓冲区）。使用u撤销命令，Ctrl+r可恢复之前撤销的命令。
可视模式
命令行模式按v进入可视模式。该模式下通过光标移动选择文本，选取后按 y 可以把文本提取到缓冲区（即复制），c 可以剪切。之后可以使用p在光标后粘贴，P粘贴在光标前。V是行选取模式，以行为单位进行选取。Ctrl+v是块选取模式，可以选取一块矩形区域中的文本。
注意: 删除的内容将存储在缓冲区，可以通过粘贴命令提取。
搜索和替换
在文件中搜索单词或字母的话，按下 /，输入搜索内容，按下回车。n查找下一处匹配，N查找上一处。
替换文本需要使用:s/命令（注意冒号），格式为:[范围]s/[原字符串]/[新字符串]/[参数]。例如：
命令	作用
 :s/xxx/yyy/	将当前行中的第一个「xxx」替换为「yyy」
 :s/xxx/yyy/g	将当前行中的所有「xxx」替换为「yyy」
 :s/xxx/yyy/gc	同上，但每次替换都会询问
 :%s/xxx/yyy/g	将整个文件中的所有「xxx」替换为「yyy」
跨行替换
下面的命令可以替换特定行中的内容：
:n,ns/one/two/g
例如，替换3、4两行中的'one'为'two'：
:3,4s/one/two/g

可以用:g/命令匹配字符串（注意冒号），并对每个匹配执行同一操作。格式为：[范围]:g/[模式串]/[命令]。例如：
命令	作用
 :g/^#/d	删除所有以「#」打头的行
 :g/^$/d	删除所有空行
保存和退出
要在Ex模式执行保存和退出，Ex模式命令都以:打头。:w保存文件，:w [文件名]可以指定文件名。:q退出，:q!放弃修改并退出。:x保存并退出（等同于:wq）。
其他命令
s删除光标处字符并进入插入模式，S删除当前行并进入插入模式。
o在当前行后插入空行并进入插入模式，O在当前行前插入空行并进入插入模式。
yy复制当前行。
cc删除当前行并进入插入模式。
*与#可以搜索当前光标下的单词，后者是向前搜索。

快捷键	行为说明
Ctrl+w+w	切换窗口
p	粘贴一整行
yy	复制一整行
:wq	保存并退出当前窗口
:wqa	保存并退出所有窗口
:q!	不保存退出

用户配置文件为~/.vimrc，相关的文件位于~/.vim/；全局配置文件为/etc/vimrc，相关的文件位于/usr/share/vim/。
代码高亮
Vim支持许多语言的代码高亮：
:filetype plugin on
:syntax on
使用鼠标
Vim可以使用鼠标：
set mouse=a

一些实用技巧。
显示行号
使用:set number显示行号。
使用:set relativenumber显示相对行号。
使用:<行号>G跳到指定行。
参考：
https://wiki.archlinux.org/index.php/Vim_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
http://vbird.dic.ksu.edu.tw/linux_basic/0310vi.php